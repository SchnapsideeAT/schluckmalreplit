var gs=Object.defineProperty;var ls=(i,e,s)=>e in i?gs(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var L=(i,e,s)=>ls(i,typeof e!="symbol"?e+"":e,s);import{j as a}from"./ui-vendor-CWUuMvY5.js";import{r as t,u as ds,e as _s}from"./react-vendor-36mAGjq4.js";import{c as vs,u as Q,d as us,s as F,e as hs,f as bs,p as W,B as V,S as ps}from"./index-Ch0JpUlD.js";import{A as fs,a as Ws,b as Cs}from"./cards-aufgabe-BsqMIGRL.js";import{D as ms,a as Ds}from"./cards-duell-cSOR_Ltv.js";import{u as As,t as B,a as xs,S as ys}from"./useWindowSize-WJ6hh2Dq.js";import{s as ws,A as ks,a as Gs,b as Ss,c as js,d as Bs,e as Ps,f as Es,g as Ns}from"./alert-dialog-DwqMeev4.js";import{B as Ms}from"./beer-DExnA11F.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=vs("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Ls="/assets/Aufgabe-01-T2QBbNj7.svg",Fs="/assets/Aufgabe-02-DnPoU8gM.svg",Ts="/assets/Aufgabe-03-t1e5jlAI.svg",Us="/assets/Aufgabe-04-Bdlmnwee.svg",Rs="/assets/Aufgabe-05-0BZsd4mG.svg",Zs="/assets/Aufgabe-06-D9bt0v0b.svg",zs="/assets/Aufgabe-07-cv8FEzbi.svg",Hs="/assets/Aufgabe-08-DM8XPm9L.svg",Os="/assets/Aufgabe-09-CeHmyLP9.svg",Vs="/assets/Aufgabe-10-Wm3iUsjw.svg",Ks="/assets/Aufgabe-11-BM1Z0d9U.svg",Qs="/assets/Aufgabe-12-DFijKWjN.svg",Xs="/assets/Aufgabe-13-CphzMtGA.svg",qs="/assets/Aufgabe-14-Bx6m0WLB.svg",Js="/assets/Aufgabe-15-Dh3XuMhf.svg",Ys="/assets/Aufgabe-16-CLdKFfZo.svg",$s="/assets/Aufgabe-17-BCzQJp9c.svg",se="/assets/Aufgabe-18-cXkABT_h.svg",ee="/assets/Aufgabe-19-CShCaLLj.svg",te="/assets/Aufgabe-20-DV3YVAMt.svg",ae="/assets/Aufgabe-21-D_i6E-oB.svg",re="/assets/Aufgabe-22-PvhzYOgZ.svg",ie="/assets/Aufgabe-23-BhzmpPn-.svg",oe="/assets/Aufgabe-24-DzLGUeU4.svg",ne="/assets/Duell-01-CPzr29BP.svg",ce="/assets/Duell-02-DgrBMWcy.svg",ge="/assets/Duell-03-BUDX4L3I.svg",le="/assets/Duell-04-D15ySSev.svg",de="/assets/Duell-05-BZxDkI6B.svg",_e="/assets/Duell-06-C7S73QvR.svg",ve="/assets/Duell-07-TWfxBtHo.svg",ue="/assets/Duell-08-DKkl8dA9.svg",he="/assets/Duell-09-DZrJnpU8.svg",be="/assets/Duell-10-Bu74szk6.svg",pe="/assets/Duell-11-BdF9UA_G.svg",fe="/assets/Duell-12-NUAJZvZ4.svg",We="/assets/Gruppe-01-CiLREw9j.svg",Ce="/assets/Gruppe-02-Gv8XANRv.svg",me="/assets/Gruppe-03-B07KAPpk.svg",De="/assets/Gruppe-04-BkhV7jq5.svg",Ae="/assets/Gruppe-05-C3sbjnDB.svg",xe="/assets/Gruppe-06-8m6Kfqyl.svg",ye="/assets/Gruppe-07-D8Sx5hmI.svg",we="/assets/Gruppe-08-DddS3gPy.svg",ke="/assets/Gruppe-09-7hEo9-Er.svg",Ge="/assets/Gruppe-10-VPhoNPcq.svg",Se="/assets/Gruppe-11-BxthENfv.svg",je="/assets/Gruppe-12-DKbQvWcU.svg",Be="/assets/Warheit-01-D7M55o9g.svg",Pe="/assets/Warheit-02-dLPyYNj9.svg",Ee="/assets/Warheit-03-kAVRCADy.svg",Ne="/assets/Warheit-04-DvHYVVjE.svg",Me="/assets/Warheit-05-D7CKUTuR.svg",Ie="/assets/Warheit-06-qxQL-k1e.svg",Le="/assets/Warheit-07-BkJLJ5na.svg",Fe="/assets/Warheit-08-juUvADUb.svg",Te="/assets/Warheit-09-BmaMhBnt.svg",Ue="/assets/Warheit-10-DtIUldKH.svg",Re="/assets/Warheit-11-8sxxr6Ev.svg",Ze="/assets/Warheit-12-BD_Mfdko.svg",ze="/assets/Warheit-13-DnnXCZWD.svg",He="/assets/Warheit-14-ZQTzJCdw.svg",Oe="/assets/Warheit-15-DGayNj48.svg",Ve="/assets/Warheit-16-sMHn9kSG.svg",Ke="/assets/Warheit-17-C2-jlWGA.svg",Qe="/assets/Warheit-18-DAsUEDf9.svg",Xe="/assets/Warheit-19-DTHTliwM.svg",qe="/assets/Warheit-20-CsDwrtfu.svg",Je="/assets/Warheit-21-COKUxL28.svg",Ye="/assets/Warheit-22-m3hfXunP.svg",$e="/assets/Warheit-23-C6OZlW4t.svg",st="/assets/Warheit-24-D3tpU-BU.svg",et="/assets/Warheit-25-Ch8rSgrP.svg",tt="/assets/Warheit-26-Ck-05zKm.svg",at="/assets/Warheit-27-DLD4qMWW.svg",rt="/assets/Warheit-28-DFnGRWP3.svg",it="/assets/Warheit-29-DHnvsJna.svg",ot="/assets/Warheit-30-CCQE-7uv.svg",nt="/assets/Warheit-31-DeVYvebH.svg",ct="/assets/Warheit-32-Bl8FkkZj.svg",gt="/assets/WildCard-01-CkR30zX-.svg",lt="/assets/WildCard-02-CRV89QsT.svg",dt="/assets/WildCard-03-OyA6kPOW.svg",_t="/assets/WildCard-04-DTZwkPOM.svg",vt="/assets/WildCard-05-ofCba_pQ.svg",ut="/assets/WildCard-06-Dz-5u3Pl.svg",ht="/assets/WildCard-07-BwvZq3a_.svg",bt="/assets/WildCard-08-Bhii3RlF.svg",pt="/assets/WildCard-09-DFE4gLjy.svg",ft="/assets/WildCard-10-BaJodrYi.svg",Wt="/assets/WildCard-11-CDkelrAn.svg",Ct="/assets/WildCard-12-Cb4BLNDq.svg",mt="/assets/WildCard-13-CYIt9xF6.svg",Dt="/assets/WildCard-14-Dy3D6v8G.svg",At="/assets/WildCard-15-CyiXkOSH.svg",xt="/assets/WildCard-16-DsC9VPyi.svg",yt="/assets/WildCard-17-CC6HWQec.svg",wt="/assets/WildCard-18-PkgCvqYF.svg",kt="/assets/WildCard-19-YrGqD1zc.svg",Gt="/assets/WildCard-20-B1Fp2OU1.svg",St="/assets/Aufgabe-04-Bdlmnwee.svg",jt="/assets/Aufgabe-05-0BZsd4mG.svg",Bt="/assets/Aufgabe-06-D9bt0v0b.svg",Pt="/assets/Aufgabe-07-cv8FEzbi.svg",Et="/assets/Aufgabe-08-DM8XPm9L.svg",Nt="/assets/Aufgabe-09-CeHmyLP9.svg",Mt="/assets/Aufgabe-10-Wm3iUsjw.svg",It="/assets/Aufgabe-11-BM1Z0d9U.svg",Lt="/assets/Aufgabe-12-DFijKWjN.svg",Ft="/assets/Aufgabe-13-CphzMtGA.svg",Tt="/assets/Aufgabe-14-Bx6m0WLB.svg",Ut="/assets/Aufgabe-15-Dh3XuMhf.svg",Rt="/assets/Aufgabe-16-CLdKFfZo.svg",Zt="/assets/Aufgabe-17-BCzQJp9c.svg",zt="/assets/Aufgabe-18-cXkABT_h.svg",Ht="/assets/Aufgabe-19-CShCaLLj.svg",Ot="/assets/Aufgabe-20-DV3YVAMt.svg",Vt="/assets/Aufgabe-21-D_i6E-oB.svg",Kt="/assets/Aufgabe-22-PvhzYOgZ.svg",Qt="/assets/Aufgabe-23-BhzmpPn-.svg",Xt="/assets/Aufgabe-24-DzLGUeU4.svg",qt="/assets/Duell-03-BUDX4L3I.svg",Jt="/assets/Duell-04-D15ySSev.svg",Yt="/assets/Duell-05-BZxDkI6B.svg",$t="/assets/Duell-06-C7S73QvR.svg",sa="/assets/Duell-07-TWfxBtHo.svg",ea="/assets/Duell-08-DKkl8dA9.svg",ta="/assets/Duell-09-DZrJnpU8.svg",aa="/assets/Duell-10-Bu74szk6.svg",ra="/assets/Duell-11-BdF9UA_G.svg",ia="/assets/Duell-12-NUAJZvZ4.svg",oa="/assets/Gruppe-01-CiLREw9j.svg",na="/assets/Gruppe-02-Gv8XANRv.svg",ca="/assets/Gruppe-03-B07KAPpk.svg",ga="/assets/Gruppe-04-BkhV7jq5.svg",la="/assets/Gruppe-05-C3sbjnDB.svg",da="/assets/Gruppe-06-8m6Kfqyl.svg",_a="/assets/Gruppe-07-D8Sx5hmI.svg",va="/assets/Gruppe-08-DddS3gPy.svg",ua="/assets/Gruppe-09-7hEo9-Er.svg",ha="/assets/Gruppe-10-VPhoNPcq.svg",ba="/assets/Gruppe-11-BxthENfv.svg",pa="/assets/Gruppe-12-DKbQvWcU.svg",fa="/assets/Warheit-01-D7M55o9g.svg",Wa="/assets/Warheit-02-dLPyYNj9.svg",Ca="/assets/Warheit-03-kAVRCADy.svg",ma="/assets/Warheit-04-DvHYVVjE.svg",Da="/assets/Warheit-05-D7CKUTuR.svg",Aa="/assets/Warheit-06-qxQL-k1e.svg",xa="/assets/Warheit-07-BkJLJ5na.svg",ya="/assets/Warheit-08-juUvADUb.svg",wa="/assets/Warheit-09-BmaMhBnt.svg",ka="/assets/Warheit-10-DtIUldKH.svg",Ga="/assets/Warheit-11-8sxxr6Ev.svg",Sa="/assets/Warheit-12-BD_Mfdko.svg",ja="/assets/Warheit-13-DnnXCZWD.svg",Ba="/assets/Warheit-14-ZQTzJCdw.svg",Pa="/assets/Warheit-15-DGayNj48.svg",Ea="/assets/Warheit-16-sMHn9kSG.svg",Na="/assets/Warheit-17-C2-jlWGA.svg",Ma="/assets/Warheit-18-DAsUEDf9.svg",Ia="/assets/Warheit-19-DTHTliwM.svg",La="/assets/Warheit-20-CsDwrtfu.svg",Fa="/assets/Warheit-21-COKUxL28.svg",Ta="/assets/Warheit-22-m3hfXunP.svg",Ua="/assets/Warheit-23-C6OZlW4t.svg",Ra="/assets/Warheit-24-D3tpU-BU.svg",Za="/assets/Warheit-25-Ch8rSgrP.svg",za="/assets/Warheit-26-Ck-05zKm.svg",Ha="/assets/Warheit-27-DLD4qMWW.svg",Oa="/assets/Warheit-28-DFnGRWP3.svg",Va="/assets/Warheit-29-DHnvsJna.svg",Ka="/assets/Warheit-30-CCQE-7uv.svg",Qa="/assets/Warheit-31-DeVYvebH.svg",Xa="/assets/Warheit-32-Bl8FkkZj.svg",qa="/assets/WildCard-01-CkR30zX-.svg",Ja="/assets/WildCard-02-CRV89QsT.svg",Ya="/assets/WildCard-03-OyA6kPOW.svg",$a="/assets/WildCard-04-DTZwkPOM.svg",sr="/assets/WildCard-05-ofCba_pQ.svg",er="/assets/WildCard-06-Dz-5u3Pl.svg",tr="/assets/WildCard-07-BwvZq3a_.svg",ar="/assets/WildCard-08-Bhii3RlF.svg",rr="/assets/WildCard-09-DFE4gLjy.svg",ir="/assets/WildCard-10-BaJodrYi.svg",or="/assets/WildCard-11-CDkelrAn.svg",nr="/assets/WildCard-12-Cb4BLNDq.svg",cr="/assets/WildCard-13-CYIt9xF6.svg",gr="/assets/WildCard-14-Dy3D6v8G.svg",lr="/assets/WildCard-15-CyiXkOSH.svg",dr="/assets/WildCard-16-DsC9VPyi.svg",_r="/assets/WildCard-17-CC6HWQec.svg",vr="/assets/WildCard-18-PkgCvqYF.svg",ur="/assets/WildCard-19-YrGqD1zc.svg",hr="/assets/WildCard-20-B1Fp2OU1.svg",br={Aufgabe:[fs,Ws,Cs,St,jt,Bt,Pt,Et,Nt,Mt,It,Lt,Ft,Tt,Ut,Rt,Zt,zt,Ht,Ot,Vt,Kt,Qt,Xt],Duell:[ms,Ds,qt,Jt,Yt,$t,sa,ea,ta,aa,ra,ia],Gruppe:[oa,na,ca,ga,la,da,_a,va,ua,ha,ba,pa],Wahrheit:[fa,Wa,Ca,ma,Da,Aa,xa,ya,wa,ka,Ga,Sa,ja,Ba,Pa,Ea,Na,Ma,Ia,La,Fa,Ta,Ua,Ra,Za,za,Ha,Oa,Va,Ka,Qa,Xa],Wildcard:[qa,Ja,Ya,$a,sr,er,tr,ar,rr,ir,or,nr,cr,gr,lr,dr,_r,vr,ur,hr]},pr=(i,e)=>{const s=br[i];if(!s||s.length===0)return console.warn(`No images found for category: ${i}`),"";const l=(e-1)%s.length;return s[l]};class fr{constructor(){L(this,"capabilities");L(this,"flags");this.capabilities=this.detectCapabilities(),this.flags=this.initializeFlags()}detectCapabilities(){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches,s=this.detectLowEndDevice(),l=this.detectWebGL(),_=this.detectNetworkQuality();return{isLowEndDevice:s,supportsAdvancedAnimations:!s&&!e,supportsWebGL:l,hasGoodNetwork:_}}detectLowEndDevice(){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=navigator.hardwareConcurrency||4,l=navigator.deviceMemory||4,_=window.screen.width*window.devicePixelRatio>=1080,d=e&&_&&s>=4,u=navigator.connection,o=u&&(u.effectiveType==="slow-2g"||u.effectiveType==="2g"||u.saveData===!0);return d?!1:s<2||l<2||o&&s<4}detectWebGL(){try{const e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch{return!1}}detectNetworkQuality(){const e=navigator.connection;if(!e)return!0;const s=e.effectiveType;return s==="4g"||s==="3g"}initializeFlags(){const{isLowEndDevice:e,supportsAdvancedAnimations:s}=this.capabilities;return{enableGlowEffects:!e,enableComplexAnimations:s,enableParticleEffects:!e,enableSounds:!0,enableHaptics:!0,reducedMotion:!s,lazyLoadImages:e||!this.capabilities.hasGoodNetwork}}getFlags(){return{...this.flags}}getCapabilities(){return{...this.capabilities}}setFlag(e,s){this.flags[e]=s;try{const l=this.getUserPreferences();l[e]=s,localStorage.setItem("schluck-mal-feature-flags",JSON.stringify(l))}catch(l){console.error("Failed to save feature flag preference:",l)}}getUserPreferences(){try{const e=localStorage.getItem("schluck-mal-feature-flags");return e?JSON.parse(e):{}}catch{return{}}}applyUserPreferences(){const e=this.getUserPreferences();this.flags={...this.flags,...e}}logDiagnostics(){}}const C=new fr;C.applyUserPreferences();const Wr=()=>{const[i,e]=t.useState(C.getFlags());return t.useEffect(()=>{const l=()=>{C.applyUserPreferences(),e(C.getFlags())};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]),{flags:i,updateFlag:(l,_)=>{C.setFlag(l,_),e(C.getFlags())},capabilities:C.getCapabilities()}},Cr={Wahrheit:"199 91% 42%",Aufgabe:"265 27% 57%",Gruppe:"101 55% 44%",Duell:"38 91% 59%",Wildcard:"352 78% 58%"},mr=t.memo(({card:i,horizontalDistance:e=0,onTouchStart:s,onTouchMove:l,onTouchEnd:_,onMouseDown:d,onMouseMove:u,onMouseUp:o})=>{const m=pr(i.category,i.id),r=Cr[i.category],{width:h,height:v}=As(),{flags:D}=Wr();D.enableComplexAnimations;const[g,A]=t.useState("entering");t.useEffect(()=>{A("entering");const b=setTimeout(()=>{A("visible")},600);return()=>clearTimeout(b)},[i.id]);const x=e*.1,T=e!==0?Math.max(.5,1-Math.abs(e)/300):1;let c,f;return h<375?(c=v*.58,f=h*.75):h<430?(c=v*.6,f=h*.78):h<768?(c=v*.62,f=h*.8):(c=v*.65,f=Math.min(h*.5,400)),a.jsxs("div",{className:`relative inline-block pointer-events-none ${g==="entering"?"animate-enter":""}`,style:{width:`${f}px`,maxHeight:`${c}px`,transform:e!==0?`translateX(${e}px) rotate(${x}deg) translateZ(0)`:"translateZ(0)",opacity:e!==0?T:void 0,backfaceVisibility:"hidden",transition:e!==0?"none":"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease-out",willChange:e!==0?"transform, opacity":"auto"},children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{boxShadow:`0 0 20px hsl(${r} / 1), 0 0 40px hsl(${r} / 0.8)`,animation:"cardGlowPulse 3s linear infinite",willChange:"opacity"}}),a.jsx("img",{src:m,alt:`${i.category} Card ${i.id}`,className:"w-full h-auto object-contain rounded-2xl block pointer-events-auto relative",draggable:!1,style:{cursor:e!==0?"grabbing":"grab"},onTouchStart:s,onTouchMove:l,onTouchEnd:_,onMouseDown:d,onMouseMove:u,onMouseUp:o,onContextMenu:b=>b.preventDefault(),onPointerDown:b=>{b.pointerType==="touch"&&b.preventDefault()},onError:b=>{console.error(`Failed to load ${i.category} card ${i.id}:`,m),console.error("Image element:",b.currentTarget)}})]})}),K=({player:i,categoryColor:e,onTap:s})=>{const{settings:l}=Q(),_=()=>{B("medium",l.hapticEnabled),s()};return a.jsx("div",{className:`fixed inset-0 ${e} z-50 flex items-center justify-center cursor-pointer animate-fade-in-smooth`,onClick:_,onTouchEnd:_,children:a.jsxs("div",{className:"text-center space-y-8 px-8 animate-scale-in-smooth",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-32 h-32 rounded-full bg-white/20 backdrop-blur-sm border-4 border-white/40 shadow-2xl",children:a.jsx("span",{className:"text-7xl drop-shadow-2xl",children:i.avatar})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-5xl font-bold text-white drop-shadow-2xl",children:i.name}),a.jsx("p",{className:"text-2xl text-white/90 drop-shadow-lg font-medium",children:"Du bist dran!"})]}),a.jsx("p",{className:"text-white/70 text-lg drop-shadow-md",children:"Tippe überall, um fortzufahren"})]})})},Br=()=>{const i=ds(),s=_s().state,{settings:l}=Q(),{insets:_}=us(),d=l.soundEnabled,u=l.hapticEnabled,[o,m]=t.useState((s==null?void 0:s.deck)||[]),[r,h]=t.useState((s==null?void 0:s.currentIndex)??-1),[v,D]=t.useState((s==null?void 0:s.cardAccepted)??!1),[g,A]=t.useState((s==null?void 0:s.players)||[]),[x,T]=t.useState((s==null?void 0:s.selectedCategories)||[]),[c,f]=t.useState((s==null?void 0:s.currentPlayerIndex)??0),[b,U]=t.useState(!1),[X,P]=t.useState(!1),[E,R]=t.useState(0),[q,y]=t.useState(!0),[J,w]=t.useState(!1),N=t.useRef(g),M=t.useRef(o),I=t.useRef(r),Z=t.useRef(c),z=t.useRef(v);t.useEffect(()=>{N.current=g,M.current=o,I.current=r,Z.current=c,z.current=v},[g,o,r,c,v]),t.useEffect(()=>{const n=setInterval(()=>{N.current.length>0&&M.current.length>0&&I.current>=0&&F({players:N.current,deck:M.current,currentIndex:I.current,currentPlayerIndex:Z.current,cardAccepted:z.current,timestamp:Date.now()})},1e4);return()=>clearInterval(n)},[]),t.useEffect(()=>{hs.preload().catch(n=>{console.warn("Failed to preload audio:",n)})},[]),t.useEffect(()=>{if(!(s!=null&&s.players)||s.players.length===0){const n=bs();if(n){A(n.players),m(n.deck),h(n.currentIndex),f(n.currentPlayerIndex),D(n.cardAccepted),y(!1),w(!0);return}i("/setup");return}if(!(s!=null&&s.deck)||s.deck.length===0){const n=ws(s==null?void 0:s.selectedCategories);m(n)}(s==null?void 0:s.currentIndex)!==void 0&&s.currentIndex>=0&&(y(!1),w(!0))},[]),t.useEffect(()=>{if(r>=0&&r>=o.length-1){const n=setTimeout(()=>{i("/statistics",{state:{players:g,deck:o,currentIndex:r,currentPlayerIndex:c,cardAccepted:v,gameFinished:!0,selectedCategories:x}})},1e3);return()=>clearTimeout(n)}},[r,o.length,i,g,c,v,x]);const k=t.useCallback(()=>{r>=o.length-1||(D(!1),h(r+1),W("cardDraw",d))},[r,o,d]),H=t.useCallback(()=>{D(!1),o[r]&&m([...o]),W("cardDraw",d)},[r,o,d]),Y=t.useCallback(n=>({Wahrheit:"bg-category-truth",Aufgabe:"bg-category-task",Gruppe:"bg-category-group",Duell:"bg-category-duel",Wildcard:"bg-category-wildcard"})[n]||"bg-primary",[]);t.useCallback(()=>{D(!0),B("light",u)},[u]);const $=t.useCallback(()=>{g[c];const n=[...g];n[c].totalDrinks=n[c].totalDrinks||0,A(n),W("swipeRight",d),y(!1);const p=(c+1)%g.length;R(p),P(!0),W("playerChange",d)},[c,g,d]),ss=t.useCallback(()=>{var O;const n=((O=o[r])==null?void 0:O.drinks)||0;g[c];const p=[...g];p[c].totalDrinks+=n,A(p),W("swipeLeft",d),W("drink",d),y(!1);const cs=(c+1)%g.length;R(cs),P(!0)},[r,o,c,g,d]);t.useCallback(()=>{i("/statistics",{state:{players:g,deck:o,currentIndex:r,currentPlayerIndex:c,cardAccepted:v,selectedCategories:x}})},[i,g,o,r,c,v,x]);const es=()=>{F({players:g,deck:o,currentIndex:r,currentPlayerIndex:c,cardAccepted:v,timestamp:Date.now()}),i("/settings",{state:{players:g,deck:o,currentIndex:r,currentPlayerIndex:c,cardAccepted:v}})},{swipeState:G,swipeHandlers:ts,resetSwipeState:S}=xs({onSwipeLeft:()=>{r>=0&&ss()},onSwipeRight:()=>{r>=0&&$()}}),as=t.useCallback(()=>{P(!1),f(E),S(),y(!0),k()},[E,k,S]),rs=t.useCallback(()=>{w(!1),S(),y(!0),r>=0?H():k()},[r,k,H,S]),j=t.useMemo(()=>o[r],[o,r]);t.useMemo(()=>o.length-r-1,[o.length,r]),t.useEffect(()=>{if(r<o.length-1){const n=o[r+1];if(n){const p=new Image;p.src=ns(n.category,n.id)}}},[r,o]);const is=()=>{B("light",u),W("buttonClick",d),U(!0)},os=()=>{F({players:g,deck:o,currentIndex:r,currentPlayerIndex:c,cardAccepted:v,timestamp:Date.now()}),i("/")},ns=(n,p)=>{try{return new URL(Object.assign({"../assets/cards/Aufgabe-01.svg":Ls,"../assets/cards/Aufgabe-02.svg":Fs,"../assets/cards/Aufgabe-03.svg":Ts,"../assets/cards/Aufgabe-04.svg":Us,"../assets/cards/Aufgabe-05.svg":Rs,"../assets/cards/Aufgabe-06.svg":Zs,"../assets/cards/Aufgabe-07.svg":zs,"../assets/cards/Aufgabe-08.svg":Hs,"../assets/cards/Aufgabe-09.svg":Os,"../assets/cards/Aufgabe-10.svg":Vs,"../assets/cards/Aufgabe-11.svg":Ks,"../assets/cards/Aufgabe-12.svg":Qs,"../assets/cards/Aufgabe-13.svg":Xs,"../assets/cards/Aufgabe-14.svg":qs,"../assets/cards/Aufgabe-15.svg":Js,"../assets/cards/Aufgabe-16.svg":Ys,"../assets/cards/Aufgabe-17.svg":$s,"../assets/cards/Aufgabe-18.svg":se,"../assets/cards/Aufgabe-19.svg":ee,"../assets/cards/Aufgabe-20.svg":te,"../assets/cards/Aufgabe-21.svg":ae,"../assets/cards/Aufgabe-22.svg":re,"../assets/cards/Aufgabe-23.svg":ie,"../assets/cards/Aufgabe-24.svg":oe,"../assets/cards/Duell-01.svg":ne,"../assets/cards/Duell-02.svg":ce,"../assets/cards/Duell-03.svg":ge,"../assets/cards/Duell-04.svg":le,"../assets/cards/Duell-05.svg":de,"../assets/cards/Duell-06.svg":_e,"../assets/cards/Duell-07.svg":ve,"../assets/cards/Duell-08.svg":ue,"../assets/cards/Duell-09.svg":he,"../assets/cards/Duell-10.svg":be,"../assets/cards/Duell-11.svg":pe,"../assets/cards/Duell-12.svg":fe,"../assets/cards/Gruppe-01.svg":We,"../assets/cards/Gruppe-02.svg":Ce,"../assets/cards/Gruppe-03.svg":me,"../assets/cards/Gruppe-04.svg":De,"../assets/cards/Gruppe-05.svg":Ae,"../assets/cards/Gruppe-06.svg":xe,"../assets/cards/Gruppe-07.svg":ye,"../assets/cards/Gruppe-08.svg":we,"../assets/cards/Gruppe-09.svg":ke,"../assets/cards/Gruppe-10.svg":Ge,"../assets/cards/Gruppe-11.svg":Se,"../assets/cards/Gruppe-12.svg":je,"../assets/cards/Warheit-01.svg":Be,"../assets/cards/Warheit-02.svg":Pe,"../assets/cards/Warheit-03.svg":Ee,"../assets/cards/Warheit-04.svg":Ne,"../assets/cards/Warheit-05.svg":Me,"../assets/cards/Warheit-06.svg":Ie,"../assets/cards/Warheit-07.svg":Le,"../assets/cards/Warheit-08.svg":Fe,"../assets/cards/Warheit-09.svg":Te,"../assets/cards/Warheit-10.svg":Ue,"../assets/cards/Warheit-11.svg":Re,"../assets/cards/Warheit-12.svg":Ze,"../assets/cards/Warheit-13.svg":ze,"../assets/cards/Warheit-14.svg":He,"../assets/cards/Warheit-15.svg":Oe,"../assets/cards/Warheit-16.svg":Ve,"../assets/cards/Warheit-17.svg":Ke,"../assets/cards/Warheit-18.svg":Qe,"../assets/cards/Warheit-19.svg":Xe,"../assets/cards/Warheit-20.svg":qe,"../assets/cards/Warheit-21.svg":Je,"../assets/cards/Warheit-22.svg":Ye,"../assets/cards/Warheit-23.svg":$e,"../assets/cards/Warheit-24.svg":st,"../assets/cards/Warheit-25.svg":et,"../assets/cards/Warheit-26.svg":tt,"../assets/cards/Warheit-27.svg":at,"../assets/cards/Warheit-28.svg":rt,"../assets/cards/Warheit-29.svg":it,"../assets/cards/Warheit-30.svg":ot,"../assets/cards/Warheit-31.svg":nt,"../assets/cards/Warheit-32.svg":ct,"../assets/cards/WildCard-01.svg":gt,"../assets/cards/WildCard-02.svg":lt,"../assets/cards/WildCard-03.svg":dt,"../assets/cards/WildCard-04.svg":_t,"../assets/cards/WildCard-05.svg":vt,"../assets/cards/WildCard-06.svg":ut,"../assets/cards/WildCard-07.svg":ht,"../assets/cards/WildCard-08.svg":bt,"../assets/cards/WildCard-09.svg":pt,"../assets/cards/WildCard-10.svg":ft,"../assets/cards/WildCard-11.svg":Wt,"../assets/cards/WildCard-12.svg":Ct,"../assets/cards/WildCard-13.svg":mt,"../assets/cards/WildCard-14.svg":Dt,"../assets/cards/WildCard-15.svg":At,"../assets/cards/WildCard-16.svg":xt,"../assets/cards/WildCard-17.svg":yt,"../assets/cards/WildCard-18.svg":wt,"../assets/cards/WildCard-19.svg":kt,"../assets/cards/WildCard-20.svg":Gt})[`../assets/cards/${n}-${String(p).padStart(2,"0")}.svg`],import.meta.url).href}catch{return""}};return a.jsxs("div",{className:"no-scroll h-screen flex flex-col relative",style:{paddingTop:_.top,paddingBottom:_.bottom,paddingLeft:_.left,paddingRight:_.right,boxSizing:"border-box"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",style:{paddingTop:"0.5rem"},children:[a.jsx(V,{onClick:is,variant:"ghost",className:"group hover:bg-muted/50 h-10 w-10 p-0 transition-transform active:scale-95",children:a.jsx(Is,{className:"!w-5 !h-5 group-hover:text-primary transition-colors"})}),a.jsx(V,{onClick:()=>{B("light",u),W("buttonClick",d),es()},variant:"ghost",className:"group hover:bg-muted/50 h-10 w-10 p-0 transition-transform active:scale-95",children:a.jsx(ps,{className:"!w-5 !h-5 group-hover:text-primary transition-colors"})})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center pointer-events-none",children:r===-1?a.jsxs("div",{className:"text-center space-y-6 slide-up cursor-pointer pointer-events-auto",onClick:()=>w(!0),onTouchStart:()=>w(!0),children:[a.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-primary/20 border border-primary/50 pulse-glow",children:a.jsx(Ms,{className:"w-12 h-12 text-primary"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Bereit?"}),a.jsx("p",{className:"text-muted-foreground",children:"Ziehe die erste Karte!"})]})]}):j&&q?a.jsxs(a.Fragment,{children:[a.jsx(mr,{card:j,horizontalDistance:G.horizontalDistance,...ts}),a.jsx(ys,{horizontalDistance:G.horizontalDistance,swipeDirection:G.swipeDirection,isSwiping:G.isSwiping})]}):null}),X&&g.length>0&&j&&a.jsx(K,{player:g[E],categoryColor:Y(j.category),onTap:as}),J&&g.length>0&&a.jsx(K,{player:g[c],categoryColor:"bg-primary",onTap:rs}),a.jsx(ks,{open:b,onOpenChange:U,children:a.jsxs(Gs,{className:"bg-card border-primary/30",children:[a.jsxs(Ss,{children:[a.jsx(js,{children:"Spiel verlassen?"}),a.jsx(Bs,{children:"Dein Fortschritt wird automatisch gespeichert und du kannst später weiterspielen."})]}),a.jsxs(Ps,{children:[a.jsx(Es,{children:"Abbrechen"}),a.jsx(Ns,{onClick:os,className:"bg-primary",children:"Speichern & Verlassen"})]})]})})]})};export{Br as default};
